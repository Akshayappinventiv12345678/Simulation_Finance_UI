<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Financial Simulation - Scenario 1</title>
  <!-- Font Awesome for Icons -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet" />
  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    /* Reset and Base Styles */
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f4f4f4;
      overflow-x: hidden;
    }

    .container {
      width: 90%;
      max-width: 1300px;
      margin: 20px auto;
      border: 2px solid #000;
      padding: 20px;
      box-sizing: border-box;
      position: relative;
      background-color: #fff;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      animation: fadeIn 1s ease-out;
    }

    /* Header Container Styles */
    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 36px;
      font-weight: bold;
      position: relative;
      padding-bottom: 20px;
      animation: slideIn 1s ease-out;
    }

    .header .title {
      flex: 1;
      text-align: center;
    }

    .header img {
      width: 80px;
      height: 80px;
      animation: bounceIn 1s ease-out;
    }

    /* Timer Styles */
    .timer-container {
      position: relative;
      width: 80px;
      height: 80px;
      flex-shrink: 0;
    }

    .timer-container svg {
      transform: rotate(-90deg);
      width: 80px;
      height: 80px;
    }

    .timer-container circle {
      fill: none;
      stroke-width: 8;
      stroke: #e0e0e0;
    }

    .timer-container .progress {
      stroke: #4E67EB;
      stroke-linecap: round;
      transition: stroke-dashoffset 1s linear, stroke 0.3s;
    }

    .timer-container .time {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 18px;
      font-weight: bold;
    }

    /* Scenario Title */
    .scenario {
      font-size: 26px;
      margin-bottom: 20px;
      text-align: center;
      font-weight: bold;
      opacity: 0;
      animation: fadeInUp 1s forwards 0.5s;
    }

    /* Progress Bar */
    .progress-bar {
      width: 100%;
      background-color: #e0e0e0;
      border-radius: 25px;
      overflow: hidden;
      margin-top: 20px;
    }

    .progress-bar-inner {
      height: 5px;
      width: 0;
      background-color: #4E67EB;
      border-radius: 25px;
      transition: width 1s ease-in-out;
    }

    /* Content Layout */
    .content {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
      position: relative;
      align-items: flex-start;
    }

    /* Vertical Divider */
    .content::before {
      content: "";
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      height: 100%;
      width: 1px;
      background-color: #000;
    }

    /* Left and Right Columns */
    .left-column,
    .right-column {
      width: 48%;
      padding: 0 20px;
      box-sizing: border-box;
    }

    /* Section Styles */
    .market-condition,
    .options,
    .investment,
    .output {
      margin-top: 20px;
    }

    .options ul {
      list-style-type: none;
      padding-left: 0;
    }

    .options ul li {
      margin-bottom: 10px;
      position: relative;
      padding-left: 20px;
    }

    .options ul li::before {
      content: "\2022";
      color: #4E67EB;
      position: absolute;
      left: 0;
    }

    /* Tables Styling */
    .table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 20px;
    }

    .table th,
    .table td {
      border: 1px solid #000;
      padding: 10px;
      text-align: left;
      position: relative;
    }

    /* Tooltip Styles */
    .tooltip {
      position: relative;
      cursor: help;
    }

    .tooltip::after {
      content: attr(data-tooltip);
      position: absolute;
      left: 50%;
      bottom: 125%;
      transform: translateX(-50%);
      background-color: #333;
      color: #fff;
      padding: 5px 10px;
      border-radius: 4px;
      white-space: nowrap;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s;
      z-index: 10;
    }

    .tooltip:hover::after {
      opacity: 1;
      visibility: visible;
    }

    /* Right-align the second column */
    .table th:nth-child(2),
    .table td:nth-child(2) {
      text-align: right;
    }

    .table th {
      background-color: #4E67EB;
      color: white;
      position: sticky;
      top: 0;
      z-index: 2;
    }

    /* Expandable Rows */
    .expandable {
      cursor: pointer;
      background-color: #e9e9e9;
    }

    .expandable:hover {
      background-color: #dcdcdc;
    }

    .hidden-row {
      display: none;
      background-color: #f9f9f9;
    }

    /* Footer Section */
    .footer-buttons {
      margin-top: 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .footer-buttons .end-button,
    .footer-buttons .next-button {
      background-color: #4E67EB;
      color: #fff;
      padding: 15px 30px;
      text-decoration: none;
      border: none;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
      transition: transform 0.3s, background-color 0.3s;
      position: relative;
      overflow: hidden;
    }

    .footer-buttons .end-button {
      background-color: #e97878;
    }

    .footer-buttons .end-button:hover {
      background-color: #d45b5b;
    }

    .footer-buttons .next-button:hover {
      background-color: #3b50c1;
    }

    .footer-buttons .end-button::before,
    .footer-buttons .next-button::before {
      content: "";
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.2);
      transform: skewX(-45deg);
      transition: left 0.3s;
    }

    .footer-buttons .end-button:hover::before,
    .footer-buttons .next-button:hover::before {
      left: 100%;
    }

    .footer-buttons .end-button:active,
    .footer-buttons .next-button:active {
      transform: scale(0.95);
    }

    /* Scrollable Table Container */
    .table-container {
      height: 500px;
      overflow-y: auto;
      border: 1px solid #ccc;
      padding: 10px;
      background-color: #fdfdfd;
      border-radius: 5px;
    }

    /* Chart Container */
    .chart-container {
      margin-top: 20px;
    }

    /* Animations */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes slideIn {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes bounceIn {
      0% { transform: translateY(-100%) scale(0.3); opacity: 0; }
      50% { transform: translateY(15%) scale(1.05); opacity: 1; }
      70% { transform: translateY(-10%) scale(0.9); }
      100% { transform: translateY(0) scale(1); }
    }

    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .container {
        width: 95%;
        padding: 15px;
      }

      .content {
        flex-direction: column;
      }

      .content::before {
        display: none;
      }

      .left-column,
      .right-column {
        width: 100%;
        padding: 0;
      }

      .footer-buttons {
        flex-direction: column;
        align-items: stretch;
        gap: 10px;
      }

      .table-container {
        height: auto;
        max-height: 300px;
      }

      .timer-container {
        width: 60px;
        height: 60px;
      }

      .timer-container .time {
        font-size: 14px;
      }

      .header {
        font-size: 24px;
      }

      .header img {
        width: 60px;
        height: 60px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Header with Timer, Title, and Logo -->
    <div class="header">
      <!-- Countdown Timer -->
      <div class="timer-container">
        <svg>
          <circle cx="40" cy="40" r="40"></circle>
          <circle class="progress" cx="40" cy="40" r="40"></circle>
        </svg>
        <div class="time" id="countdown-timer">05:00</div>
      </div>

      <!-- Title -->
      <div class="title">Financial Simulation</div>

      <!-- Logo -->
      <img alt="ZENLEARN Logo" src="logo.png" />
    </div>

    <!-- Scenario Title -->
    <div class="scenario">Scenario 1: Bidding for New Projects</div>

    <!-- Progress Bar -->
    <div class="progress-bar">
      <div class="progress-bar-inner" id="progress-bar-inner"></div>
    </div>

    <div class="content">
      <!-- Left column: Description and details -->
      <div class="left-column">
        <div class="market-condition">
          <p>
            <strong>Market Condition:</strong> The company has identified a major upcoming infrastructure project within its industry that requires industrial components similar to its offerings. Management sees this as an opportunity to secure a large, long-term contract, which could lead to consistent revenue streams over multiple years.
          </p>
        </div>
        
        <div class="options">
          <p><strong>Options for Management:</strong></p>
          <ul>
            <li>
              <strong>1. Prepare a Competitive Bid for the Project:</strong>
              <ul>
                <li>Pros: Potential for a long-term revenue stream.</li>
                <li>Cons: High competition; the bidding process is costly and time-consuming.</li>
              </ul>
            </li>
            <li>
              <strong>2. Collaborate with Another Firm to Bid Jointly:</strong>
              <ul>
                <li>Pros: Shares risks and costs.</li>
                <li>Cons: Must share profits if the bid is successful.</li>
              </ul>
            </li>
          </ul>
        </div>

        <div class="investment">
          <p><strong>Investment Required:</strong></p>
          <ul>
            <li>Bid Preparation Costs: INR 1,50,000</li>
            <li>Administrative Expenses for Joint Bid: INR 75,000</li>
          </ul>
        </div>
        
        <div class="output">
          <p><strong>Output Gained:</strong></p>
          <ul>
            <li>Revenue from Successful Bid: INR 50,00,000</li>
            <li>Shared Revenue in a Joint Bid Collaboration: INR 25,00,000</li>
          </ul>
        </div>

        <!-- Buttons for Competitive Bid and Joint Bid -->
        <div class="footer-buttons">
          <button class="next-button" id="competitive-bid-btn">Competitive Bid</button>
          <button class="next-button" id="joint-bid-btn">Joint Bid</button>
        </div>
      </div>

      <!-- Right column: Tables and Charts -->
      <div class="right-column">
        <div class="updated-values"><strong>(Values before the scenario)</strong></div>
        <!-- Scrollable Container Start -->
        <div class="table-container">
          <!-- Balance Sheet Table -->
          <table class="table" id="balance-sheet-table">
            <thead>
              <tr>
                <th colspan="2">Balance Sheet</th>
              </tr>
              <tr>
                <th>Assets</th>
                <th>INR Lakhs</th>
              </tr>
            </thead>
            <tbody>
              <tr class="expandable">
                <td><strong>Current Assets <i class="fas fa-plus"></i></strong></td>
                <td></td>
              </tr>
              <tr class="hidden-row">
                <td>Cash and Cash Equivalents</td>
                <td id="cash-equivalents">50</td>
              </tr>
              <tr class="hidden-row">
                <td>Accounts Receivable</td>
                <td id="accounts-receivable">80</td>
              </tr>
              <tr class="hidden-row">
                <td>Inventory</td>
                <td id="inventory">100</td>
              </tr>
              <tr class="hidden-row">
                <td><strong>Total Current Assets</strong></td>
                <td id="total-current-assets">230</td>
              </tr>
              <tr class="expandable">
                <td><strong>Non-current Assets <i class="fas fa-plus"></i></strong></td>
                <td></td>
              </tr>
              <tr class="hidden-row">
                <td>Property, Plant & Equipment</td>
                <td id="property-plant-equipment">500</td>
              </tr>
              <tr class="hidden-row">
                <td>Intangible Assets (Patents)</td>
                <td id="intangible-assets">20</td>
              </tr>
              <tr class="hidden-row">
                <td><strong>Total Non-current Assets</strong></td>
                <td id="total-non-current-assets">520</td>
              </tr>
              <tr>
                <td><strong>Total Assets</strong></td>
                <td id="total-assets">750</td>
              </tr>
            </tbody>
          </table>

          <!-- Liabilities & Equity Table -->
          <table class="table" id="liabilities-equity-table">
            <thead>
              <tr>
                <th>Liabilities & Equity</th>
                <th>INR Lakhs</th>
              </tr>
            </thead>
            <tbody>
              <tr class="expandable">
                <td><strong>Current Liabilities <i class="fas fa-plus"></i></strong></td>
                <td></td>
              </tr>
              <tr class="hidden-row">
                <td>Accounts Payable</td>
                <td id="accounts-payable">70</td>
              </tr>
              <tr class="hidden-row">
                <td>Short-term Debt</td>
                <td id="short-term-debt">30</td>
              </tr>
              <tr class="hidden-row">
                <td><strong>Total Current Liabilities</strong></td>
                <td id="total-current-liabilities">100</td>
              </tr>
              <tr class="expandable">
                <td><strong>Long-term Liabilities <i class="fas fa-plus"></i></strong></td>
                <td></td>
              </tr>
              <tr class="hidden-row">
                <td>Long-term Debt</td>
                <td id="long-term-debt">150</td>
              </tr>
              <tr class="hidden-row">
                <td><strong>Total Liabilities</strong></td>
                <td id="total-liabilities">250</td>
              </tr>
              <tr class="expandable">
                <td><strong>Equity <i class="fas fa-plus"></i></strong></td>
                <td></td>
              </tr>
              <tr class="hidden-row">
                <td>Shareholders’ Equity</td>
                <td id="shareholders-equity">500</td>
              </tr>
              <tr>
                <td><strong>Total Liabilities & Equity</strong></td>
                <td id="total-liabilities-equity">750</td>
              </tr>
            </tbody>
          </table>

          <!-- Profit and Loss Statement Table -->
          <table class="table" id="profit-loss-table">
            <thead>
              <tr>
                <th colspan="2">Profit & Loss (Income) Statement</th>
              </tr>
              <tr>
                <th>Line Item</th>
                <th>INR Lakhs</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><span class="tooltip" data-tooltip="Total sales revenue generated by the company.">Revenue (Sales)</span></td>
                <td id="revenue">400</td>
              </tr>
              <tr>
                <td><span class="tooltip" data-tooltip="Direct costs attributable to the production of goods sold by the company.">Cost of Goods Sold (COGS)</span></td>
                <td id="cogs">200</td>
              </tr>
              <tr>
                <td>Gross Profit</td>
                <td id="gross-profit">200</td>
              </tr>
              <tr>
                <td>Operating Expenses</td>
                <td id="operating-expenses">120</td>
              </tr>
              <tr>
                <td>Operating Income (EBIT)</td>
                <td id="operating-income">80</td>
              </tr>
              <tr>
                <td>Interest Expense</td>
                <td id="interest-expense">20</td>
              </tr>
              <tr>
                <td>Income Before Tax</td>
                <td id="income-before-tax">60</td>
              </tr>
              <tr>
                <td>Tax</td>
                <td id="tax">15</td>
              </tr>
              <tr>
                <td>Net Income</td>
                <td id="net-income">45</td>
              </tr>
            </tbody>
          </table>

          <!-- Cash Flow Statement Table -->
          <table class="table" id="cash-flow-table">
            <thead>
              <tr>
                <th colspan="2">Cash Flow Statement</th>
              </tr>
              <tr>
                <th>Line Item</th>
                <th>INR Lakhs</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Cash from Operating Activities</td>
                <td id="cash-operating">50</td>
              </tr>
              <tr>
                <td>Cash from Investing Activities</td>
                <td id="cash-investing">-100</td>
              </tr>
              <tr>
                <td>Cash from Financing Activities</td>
                <td id="cash-financing">30</td>
              </tr>
              <tr>
                <td><strong>Net Increase in Cash</strong></td>
                <td id="net-increase-cash">-20</td>
              </tr>
            </tbody>
          </table>

          <!-- Ratios Table -->
          <table class="table" id="ratios-table">
            <thead>
              <tr>
                <th>Ratio</th>
                <th>Value</th>
              </tr>
            </thead>
            <tbody>
              <!-- Liquidity Ratios -->
              <tr class="expandable">
                <td colspan="2"><strong>Liquidity Ratios <i class="fas fa-plus"></i></strong></td>
                <td></td>
              </tr>
              <tr class="hidden-row">
                <td>1. Current Ratio</td>
                <td id="current-ratio">1.5</td>
              </tr>
              <tr class="hidden-row">
                <td>2. Quick Ratio (Acid Test)</td>
                <td id="quick-ratio">1.2</td>
              </tr>

              <!-- Profitability Ratios -->
              <tr class="expandable">
                <td colspan="2"><strong>Profitability Ratios <i class="fas fa-plus"></i></strong></td>
                <td></td>
              </tr>
              <tr class="hidden-row">
                <td>3. Gross Profit Margin</td>
                <td id="gross-profit-margin">50%</td>
              </tr>
              <tr class="hidden-row">
                <td>4. Net Profit Margin</td>
                <td id="net-profit-margin">11.25%</td>
              </tr>
              <tr class="hidden-row">
                <td>5. Return on Assets (ROA)</td>
                <td id="roa">6%</td>
              </tr>
              <tr class="hidden-row">
                <td>6. Return on Equity (ROE)</td>
                <td id="roe">9%</td>
              </tr>

              <!-- Efficiency Ratios -->
              <tr class="expandable">
                <td colspan="2"><strong>Efficiency Ratios <i class="fas fa-plus"></i></strong></td>
                <td></td>
              </tr>
              <tr class="hidden-row">
                <td>7. Inventory Turnover Ratio</td>
                <td id="inventory-turnover">2.5</td>
              </tr>
              <tr class="hidden-row">
                <td>8. Accounts Receivable Turnover Ratio</td>
                <td id="ar-turnover">4.0</td>
              </tr>
              <tr class="hidden-row">
                <td>9. Asset Turnover Ratio</td>
                <td id="asset-turnover">0.53</td>
              </tr>

              <!-- Leverage Ratios -->
              <tr class="expandable">
                <td colspan="2"><strong>Leverage Ratios <i class="fas fa-plus"></i></strong></td>
                <td></td>
              </tr>
              <tr class="hidden-row">
                <td>10. Debt-to-Equity Ratio</td>
                <td id="debt-equity-ratio">0.5</td>
              </tr>
              <tr class="hidden-row">
                <td>11. Interest Coverage Ratio</td>
                <td id="interest-coverage-ratio">4</td>
              </tr>
              <tr class="hidden-row">
                <td>12. Debt Service Coverage Ratio (DSCR)</td>
                <td id="dscr">3</td>
              </tr>

              <!-- Cash Flow Ratios -->
              <tr class="expandable">
                <td colspan="2"><strong>Cash Flow Ratios <i class="fas fa-plus"></i></strong></td>
                <td></td>
              </tr>
              <tr class="hidden-row">
                <td>13. Operating Cash Flow Ratio</td>
                <td id="operating-cash-flow-ratio">0.5</td>
              </tr>
              <tr class="hidden-row">
                <td>14. Free Cash Flow (FCF)</td>
                <td id="free-cash-flow">-20</td>
              </tr>

              <!-- Valuation Ratios -->
              <tr class="expandable">
                <td colspan="2"><strong>Valuation Ratios <i class="fas fa-plus"></i></strong></td>
                <td></td>
              </tr>
              <tr class="hidden-row">
                <td>15. Price-to-Earnings (P/E) Ratio</td>
                <td id="pe-ratio">15</td>
              </tr>
              <tr class="hidden-row">
                <td>16. Earnings per Share (EPS)</td>
                <td id="eps">45</td>
              </tr>
            </tbody>
          </table>
        </div>
        <!-- Scrollable Container End -->

        <!-- Interactive Chart -->
        <div class="chart-container">
          <canvas id="revenueChart"></canvas>
        </div>
      </div>
    </div>

    <!-- Footer Section with End Simulation Button -->
    <div class="footer-buttons">
      <a href="index.html" class="end-button">End Simulation</a>
    </div>
  </div>

  <!-- JavaScript for Interactive Elements -->
  <script>
    // Countdown Timer with Circular Progress
    const countdownDuration = 5 * 60; // 5 minutes in seconds
    let remainingTime = countdownDuration;
    const timerElement = document.getElementById('countdown-timer');
    const progressCircle = document.querySelector('.progress');
    const totalDash = 251; // Circumference for r=40 (2 * π * 40 ≈ 251)

    function updateTimer() {
      const minutes = Math.floor(remainingTime / 60);
      const seconds = remainingTime % 60;
      timerElement.textContent = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
      
      // Update circular progress
      const progressOffset = totalDash - (remainingTime / countdownDuration) * totalDash;
      progressCircle.style.strokeDashoffset = progressOffset;

      // Change color based on time remaining
      if (remainingTime <= 60) {
        progressCircle.style.stroke = '#ff4e4e'; // Red
      } else if (remainingTime <= 3 * 60) {
        progressCircle.style.stroke = '#f1c40f'; // Yellow
      } else {
        progressCircle.style.stroke = '#4E67EB'; // Blue
      }

      if (remainingTime > 0) {
        remainingTime--;
      } else {
        clearInterval(timerInterval);
        clearInterval(progressInterval);
        alert('Time is up! The simulation will now end.');
        window.location.href = "index.html"; // Redirect to index or desired action
      }
    }

    // Initialize the timer
    progressCircle.style.strokeDasharray = totalDash;
    progressCircle.style.strokeDashoffset = totalDash;
    updateTimer(); // Initial call
    const timerInterval = setInterval(updateTimer, 1000);

    // Progress Bar Update synchronized with the countdown timer
    const progressBarInner = document.getElementById('progress-bar-inner');
    function updateProgressBar() {
      const elapsedTime = countdownDuration - remainingTime;
      const progressPercentage = (elapsedTime / countdownDuration) * 100;
      progressBarInner.style.width = `${progressPercentage}%`;
    }

    // Initialize the progress bar
    updateProgressBar(); // Initial call
    const progressInterval = setInterval(updateProgressBar, 1000);

    // Expandable Rows in Tables
    const expandableRows = document.querySelectorAll('.expandable');
    expandableRows.forEach(row => {
      row.addEventListener('click', () => {
        const icon = row.querySelector('i');
        const nextRows = [];
        let sibling = row.nextElementSibling;
        while (sibling && sibling.classList.contains('hidden-row')) {
          nextRows.push(sibling);
          sibling = sibling.nextElementSibling;
        }
        nextRows.forEach(r => {
          r.style.display = r.style.display === 'table-row' ? 'none' : 'table-row';
        });
        // Toggle icon
        if(icon.classList.contains('fa-plus')){
          icon.classList.remove('fa-plus');
          icon.classList.add('fa-minus');
        } else {
          icon.classList.remove('fa-minus');
          icon.classList.add('fa-plus');
        }
      });
    });

    // Interactive Chart using Chart.js
    const ctx = document.getElementById('revenueChart').getContext('2d');
    const revenueChart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: ['Before Scenario', 'After Scenario'],
        datasets: [{
          label: 'Revenue (INR Lakhs)',
          data: [400, 0], // Initial data
          backgroundColor: ['#4E67EB', '#f1c40f']
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: {
            display: true,
            position: 'top',
            labels: {
              boxWidth: 20,
              padding: 15
            }
          },
          title: {
            display: true,
            text: 'Revenue Before and After Scenario'
          }
        },
        animation: {
          duration: 1000,
          easing: 'easeInOutQuad'
        },
        scales: {
          y: {
            beginAtZero: true
          }
        }
      }
    });

    // Function to update the chart with new data
    function updateChart(data) {
      revenueChart.data.datasets[0].data[1] = data.profitAndLoss.revenue;
      revenueChart.options.plugins.title.text = 'Revenue Before and After Scenario';
      revenueChart.update();
    }

    // Function to update tables with fetched data
    function updateTables(data) {
      // Balance Sheet Table
      document.getElementById('cash-equivalents').textContent = data.balanceSheet.assets.currentAssets.cash;
      document.getElementById('accounts-receivable').textContent = data.balanceSheet.assets.currentAssets.accountsReceivable;
      document.getElementById('inventory').textContent = data.balanceSheet.assets.currentAssets.inventory;
      document.getElementById('total-current-assets').textContent = data.balanceSheet.assets.currentAssets.totalCurrentAssets;

      document.getElementById('property-plant-equipment').textContent = data.balanceSheet.assets.nonCurrentAssets.propertyPlantEquipment;
      document.getElementById('intangible-assets').textContent = data.balanceSheet.assets.nonCurrentAssets.intangibleAssets;
      document.getElementById('total-non-current-assets').textContent = data.balanceSheet.assets.nonCurrentAssets.totalNonCurrentAssets;

      document.getElementById('total-assets').textContent = data.balanceSheet.assets.totalAssets;

      // Liabilities & Equity Table
      document.getElementById('accounts-payable').textContent = data.liabilitiesAndEquity.currentLiabilities.accountsPayable;
      document.getElementById('short-term-debt').textContent = data.liabilitiesAndEquity.currentLiabilities.shortTermDebt;
      document.getElementById('total-current-liabilities').textContent = data.liabilitiesAndEquity.currentLiabilities.totalCurrentLiabilities;

      document.getElementById('long-term-debt').textContent = data.liabilitiesAndEquity.longTermLiabilities.longTermDebt;
      document.getElementById('total-liabilities').textContent = data.liabilitiesAndEquity.longTermLiabilities.totalLiabilities;

      document.getElementById('shareholders-equity').textContent = data.liabilitiesAndEquity.equity.shareholdersEquity;
      document.getElementById('total-liabilities-equity').textContent = data.liabilitiesAndEquity.totalLiabilitiesAndEquity;

      // Profit and Loss Statement Table
      document.getElementById('revenue').textContent = data.profitAndLoss.revenue;
      document.getElementById('cogs').textContent = data.profitAndLoss.costOfGoodsSold;
      document.getElementById('gross-profit').textContent = data.profitAndLoss.grossProfit;
      document.getElementById('operating-expenses').textContent = data.profitAndLoss.operatingExpenses;
      document.getElementById('operating-income').textContent = data.profitAndLoss.operatingIncome;
      document.getElementById('interest-expense').textContent = data.profitAndLoss.interestExpense;
      document.getElementById('income-before-tax').textContent = data.profitAndLoss.incomeBeforeTax;
      document.getElementById('tax').textContent = data.profitAndLoss.tax;
      document.getElementById('net-income').textContent = data.profitAndLoss.netIncome;

      // Cash Flow Statement Table
      document.getElementById('cash-operating').textContent = data.cashFlow.cashFromOperatingActivities;
      document.getElementById('cash-investing').textContent = data.cashFlow.cashFromInvestingActivities;
      document.getElementById('cash-financing').textContent = data.cashFlow.cashFromFinancingActivities;
      document.getElementById('net-increase-cash').textContent = data.cashFlow.netIncreaseInCash;

      // Ratios Table
      document.getElementById('current-ratio').textContent = data.ratios.liquidityRatios.currentRatio;
      document.getElementById('quick-ratio').textContent = data.ratios.liquidityRatios.quickRatio;

      document.getElementById('gross-profit-margin').textContent = data.ratios.profitabilityRatios.grossProfitMargin;
      document.getElementById('net-profit-margin').textContent = data.ratios.profitabilityRatios.netProfitMargin;
      document.getElementById('roa').textContent = data.ratios.profitabilityRatios.returnOnAssets;
      document.getElementById('roe').textContent = data.ratios.profitabilityRatios.returnOnEquity;

      document.getElementById('inventory-turnover').textContent = data.ratios.efficiencyRatios.inventoryTurnover;
      document.getElementById('ar-turnover').textContent = data.ratios.efficiencyRatios.accountsReceivableTurnover;
      document.getElementById('asset-turnover').textContent = data.ratios.efficiencyRatios.assetTurnover;

      document.getElementById('debt-equity-ratio').textContent = data.ratios.leverageRatios.debtToEquityRatio;
      document.getElementById('interest-coverage-ratio').textContent = data.ratios.leverageRatios.interestCoverageRatio;
      document.getElementById('dscr').textContent = data.ratios.leverageRatios.debtServiceCoverageRatio;

      document.getElementById('operating-cash-flow-ratio').textContent = data.ratios.cashFlowRatios.operatingCashFlowRatio;
      document.getElementById('free-cash-flow').textContent = data.ratios.cashFlowRatios.freeCashFlow;

      document.getElementById('pe-ratio').textContent = data.ratios.valuationRatios.peRatio;
      document.getElementById('eps').textContent = data.ratios.valuationRatios.eps;

      // Update the "Values before the scenario" label
      document.querySelector('.updated-values').innerHTML = '<strong>(Values after the scenario)</strong>';
    }

    // Function to simulate fetching data from an API and updating the tables and chart
    function fetchDataAndUpdate(option) {
      // Example API endpoint (replace with your actual API)
      const apiUrl = `https://example.com/api/data?option=${option}`;

      // For demonstration purposes, we'll use sample data instead of an actual API call
      // Uncomment the fetch code below and remove the sampleData object when using a real API

      /*
      fetch(apiUrl)
        .then(response => response.json())
        .then(data => {
          updateTables(data);
          updateChart(data);
        })
        .catch(error => console.error('Error fetching data:', error));
      */

      // Sample data for demonstration
      const sampleData = {
        balanceSheet: {
          assets: {
            currentAssets: {
              cash: option === 'competitive' ? 60 : 55,
              accountsReceivable: option === 'competitive' ? 90 : 85,
              inventory: option === 'competitive' ? 110 : 105,
              totalCurrentAssets: option === 'competitive' ? 260 : 245
            },
            nonCurrentAssets: {
              propertyPlantEquipment: option === 'competitive' ? 520 : 510,
              intangibleAssets: option === 'competitive' ? 25 : 23,
              totalNonCurrentAssets: option === 'competitive' ? 545 : 533
            },
            totalAssets: option === 'competitive' ? 805 : 778
          },
          liabilitiesAndEquity: {
            currentLiabilities: {
              accountsPayable: option === 'competitive' ? 75 : 72,
              shortTermDebt: option === 'competitive' ? 35 : 33,
              totalCurrentLiabilities: option === 'competitive' ? 110 : 105
            },
            longTermLiabilities: {
              longTermDebt: option === 'competitive' ? 160 : 155,
              totalLiabilities: option === 'competitive' ? 270 : 260
            },
            equity: {
              shareholdersEquity: option === 'competitive' ? 535 : 518
            },
            totalLiabilitiesAndEquity: option === 'competitive' ? 805 : 778
          }
        },
        profitAndLoss: {
          revenue: option === 'competitive' ? 500 : 450,
          costOfGoodsSold: option === 'competitive' ? 250 : 225,
          grossProfit: option === 'competitive' ? 250 : 225,
          operatingExpenses: option === 'competitive' ? 135 : 130,
          operatingIncome: option === 'competitive' ? 115 : 95,
          interestExpense: option === 'competitive' ? 25 : 22,
          incomeBeforeTax: option === 'competitive' ? 90 : 73,
          tax: option === 'competitive' ? 22 : 18,
          netIncome: option === 'competitive' ? 68 : 55
        },
        cashFlow: {
          cashFromOperatingActivities: option === 'competitive' ? 70 : 60,
          cashFromInvestingActivities: option === 'competitive' ? -120 : -110,
          cashFromFinancingActivities: option === 'competitive' ? 40 : 35,
          netIncreaseInCash: option === 'competitive' ? -10 : -15
        },
        ratios: {
          liquidityRatios: {
            currentRatio: option === 'competitive' ? 1.7 : 1.6,
            quickRatio: option === 'competitive' ? 1.4 : 1.3
          },
          profitabilityRatios: {
            grossProfitMargin: '50%',
            netProfitMargin: option === 'competitive' ? '15%' : '12.22%',
            returnOnAssets: option === 'competitive' ? '8.45%' : '7.07%',
            returnOnEquity: option === 'competitive' ? '12.71%' : '10.61%'
          },
          efficiencyRatios: {
            inventoryTurnover: 3.0,
            accountsReceivableTurnover: 4.5,
            assetTurnover: 0.6
          },
          leverageRatios: {
            debtToEquityRatio: 0.6,
            interestCoverageRatio: 5,
            debtServiceCoverageRatio: 3.5
          },
          cashFlowRatios: {
            operatingCashFlowRatio: 0.6,
            freeCashFlow: -15
          },
          valuationRatios: {
            peRatio: 16,
            eps: 50
          }
        }
      };

      // Simulate API call delay
      setTimeout(() => {
        updateTables(sampleData);
        updateChart(sampleData);
        updateProgressBarAfterSelection();
      }, 500);
    }

    // Function to update progress bar to 100% after selection
    function updateProgressBarAfterSelection() {
      progressBarInner.style.width = '100%';
    }

    // Add event listeners to the buttons
    document.getElementById('competitive-bid-btn').addEventListener('click', () => {
      fetchDataAndUpdate('competitive');
    });

    document.getElementById('joint-bid-btn').addEventListener('click', () => {
      fetchDataAndUpdate('joint');
    });

    // Accessibility: Keyboard Navigation for Buttons
    const buttons = document.querySelectorAll('.footer-buttons .end-button, .footer-buttons .next-button');
    buttons.forEach(button => {
      button.setAttribute('tabindex', '0');
      button.addEventListener('keydown', (e) => {
        if(e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          button.click();
        }
      });
    });

    // Smooth Page Transition (optional)
    window.onload = () => {
      document.body.classList.add('loaded');
    };
  </script>
</body>
</html>
